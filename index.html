<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Thi·ªáp m·ªùi sinh nh·∫≠t</title>
<style>
  :root{
    --bg:#0f1226;
    --card:#0f1724;
    --accent:#ff6b6b;
    --accent2:#ffd166;
    --glass: rgba(255,255,255,0.06);
  }
  html,body{height:100%;margin:0;font-family:Inter,Segoe UI,Roboto,'Helvetica Neue',Arial;}
  body{
    background:
      radial-gradient(ellipse at 10% 10%, rgba(255,255,255,0.02), transparent 10%),
      linear-gradient(180deg,#071027 0%, #0f1226 60%);
    color:#fff;display:flex;align-items:center;justify-content:center;padding:20px;
    overflow:hidden;
  }

  .stage{width:100%;max-width:980px;background:linear-gradient(180deg, rgba(255,255,255,0.03), transparent);border-radius:18px;padding:28px;box-shadow:0 10px 40px rgba(2,6,23,0.6);position:relative;overflow:hidden;}
  header{display:flex;gap:18px;align-items:center;}
  .logo{width:72px;height:72px;border-radius:14px;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:700;box-shadow:0 6px 20px rgba(255,107,107,0.18); transform:rotate(-8deg); }
  .logo span{font-size:28px;color:#111;}
  .title{flex:1;}
  h1{margin:0;font-size:20px;letter-spacing:0.2px;}
  p.lead{margin:4px 0 0;color:rgba(255,255,255,0.85);opacity:0.95}

  .card-content{display:flex;gap:24px;margin-top:22px;align-items:stretch;}
  .left{flex:1;min-width:300px; background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent); border-radius:14px;padding:18px;position:relative;box-shadow:inset 0 1px 0 rgba(255,255,255,0.02);}
  .right{width:320px; background:var(--glass); border-radius:14px;padding:18px;backdrop-filter: blur(6px);}

  /* Cake */
  .cake {display:flex;flex-direction:column;align-items:center;gap:8px;padding:18px;}
  .flame{width:28px;height:28px;border-radius:50%;position:relative;transform:translateY(-6px);animation:flame 900ms infinite;}
  .flame::before{content:"";position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:14px;height:24px;background:linear-gradient(180deg,#ffd166,#ff8a00);border-radius:12px 12px 8px 8px;filter:blur(0.6px)}
  @keyframes flame{
    0%{transform:translateY(-6px) scale(1)}
    50%{transform:translateY(-10px) scale(1.08)}
    100%{transform:translateY(-6px) scale(1)}
  }
  .candles{display:flex;gap:10px;align-items:flex-end;}
  .candle{width:12px;height:50px;border-radius:6px;background:linear-gradient(180deg,#fff,#f0f0f0);position:relative; box-shadow: 0 3px 10px rgba(0,0,0,0.25); transform-origin:center bottom; animation:sway 3000ms infinite ease-in-out;}
  .candle:nth-child(2){height:58px; animation-delay:-420ms}
  .candle:nth-child(3){height:52px; animation-delay:-80ms}
  @keyframes sway{
    0%{transform:rotate(-2deg)}
    50%{transform:rotate(3deg)}
    100%{transform:rotate(-2deg)}
  }
  .cake-plate{width:220px;height:86px;border-radius:18px;background:linear-gradient(180deg,#ff7b7b, #ff4d4d);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;box-shadow:0 12px 30px rgba(255,77,77,0.12);transform:translateY(6px);}

  /* Confetti canvas sits behind */
  canvas.confetti{position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:0}

  /* Message */
  .message{margin-top:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);padding:12px;border-radius:12px;box-shadow:inset 0 1px 0 rgba(255,255,255,0.02)}
  .message h2{margin:0 0 8px 0;font-size:18px}
  .message p{margin:0;color:rgba(255,255,255,0.9)}

  /* Buttons */
  .controls{display:flex;gap:12px;margin-top:14px;}
  .btn{padding:10px 14px;border-radius:10px;background:linear-gradient(180deg,#22273a,#1b2030);color:#fff;border:1px solid rgba(255,255,255,0.04);cursor:pointer;box-shadow:0 6px 18px rgba(3,6,23,0.6);display:inline-flex;gap:8px;align-items:center;}
  .btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent2));color:#111;font-weight:700;border:none}
  .btn:active{transform:translateY(1px)}

  /* RSVP form */
  form{display:flex;flex-direction:column;gap:10px}
  label{font-size:13px;color:rgba(255,255,255,0.8)}
  input[type="text"], input[type="email"], textarea, select{
    padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:#fff;outline:none
  }
  textarea{min-height:80px;resize:vertical}
  .small{font-size:13px;color:rgba(255,255,255,0.7)}

  footer{margin-top:18px;text-align:center;color:rgba(255,255,255,0.6);font-size:13px}

  /* tiny sparkle */
  .sparkle{position:absolute;right:16px;top:12px;font-size:12px;background:rgba(255,255,255,0.05);padding:8px;border-radius:8px}
  /* mobile tweaks */
  @media (max-width:880px){
    .card-content{flex-direction:column}
    .right{width:100%}
  }
</style>
</head>
<body>
<canvas class="confetti"></canvas>
<div class="stage" role="main" aria-labelledby="inviteTitle">
  <header>
    <div class="logo"><span>BD</span></div>
    <div class="title">
      <h1 id="inviteTitle">M·ªùi b·∫°n ƒë·∫øn Sinh nh·∫≠t c·ªßa <span id="nameHolder">[T√™n]</span> üéâ</h1>
      <p class="lead">Ng√†y: <strong id="dateHolder">01/01/2026</strong> ¬∑ ƒê·ªãa ƒëi·ªÉm: <strong id="placeHolder">Nh√† m√¨nh / Zoom</strong></p>
    </div>
    <div class="sparkle">üéÇ Live</div>
  </header>

  <div class="card-content">
    <div class="left" aria-hidden="false">
      <div class="cake" aria-hidden="true">
        <div class="candles">
          <div class="candle"><div class="flame"></div></div>
          <div class="candle"><div class="flame"></div></div>
          <div class="candle"><div class="flame"></div></div>
        </div>
        <div class="cake-plate">HAPPY BIRTHDAY</div>
      </div>

      <div class="message" id="mainMessage">
        <h2>Xin ch√†o!</h2>
        <p>B·∫°n ƒë∆∞·ª£c m·ªùi t·ªõi b·ªØa ti·ªác sinh nh·∫≠t c·ªßa m√¨nh. Nh·∫•n <strong>Play</strong> ƒë·ªÉ nghe nh·∫°c v√† <strong>RSVP</strong> nh√©. C√≥ qu√† ·∫£o v√† ·∫£nh k·ª∑ ni·ªám!</p>
      </div>

      <div class="controls">
        <button class="btn primary" id="playBtn">‚ñ∂ B·∫≠t nh·∫°c & Kh·ªüi ƒë·ªông</button>
        <button class="btn" id="toggleConfetti">üéä Confetti</button>
        <button class="btn" id="surpriseBtn">‚ú® Hi·ªáu ·ª©ng b·∫•t ng·ªù</button>
      </div>

    </div>

    <aside class="right" aria-label="RSVP panel">
      <h3 style="margin:0 0 10px 0">X√°c nh·∫≠n tham gia (RSVP)</h3>
      <form id="rsvpForm">
        <label for="guestName">T√™n b·∫°n</label>
        <input id="guestName" type="text" placeholder="V√≠ d·ª•: Nam" required>

        <label for="guestEmail">Email (tu·ª≥ ch·ªçn)</label>
        <input id="guestEmail" type="email" placeholder="name@example.com">

        <label for="attend">B·∫°n c√≥ tham d·ª±?</label>
        <select id="attend">
          <option value="yes">C√≥ ‚Äî m√¨nh s·∫Ω ƒë·∫øn</option>
          <option value="maybe">C√≥ th·ªÉ</option>
          <option value="no">Kh√¥ng ‚Äî g·ª≠i l·ªùi ch√∫c</option>
        </select>

        <label for="msg">L·ªùi nh·∫Øn / Qu√† ·∫£o</label>
        <textarea id="msg" placeholder="Vi·∫øt l·ªùi ch√∫c..."></textarea>

        <button class="btn primary" type="submit">G·ª≠i RSVP</button>
        <div class="small" id="saveNotice">RSVP s·∫Ω ƒë∆∞·ª£c l∆∞u t·∫°m tr√™n tr√¨nh duy·ªát (local).</div>
      </form>

      <hr style="margin:12px 0 10px">
      <div>
        <strong>Kh√°c</strong>
        <p class="small">B·∫°n c√≥ th·ªÉ chia s·∫ª link n√†y cho b·∫°n b√®. N·∫øu host tr√™n web, h√£y t·∫°o QR tr·ªè t·ªõi link ƒë·ªÉ m·ªçi ng∆∞·ªùi qu√©t.</p>
      </div>
    </aside>
  </div>

  <footer>Thi·ªáp ƒë∆∞·ª£c t·∫°o t·ª± ƒë·ªông ‚Äî Ch√∫c b·∫°n m·ªôt sinh nh·∫≠t th·∫≠t vui! üéà</footer>
</div>

<script>
/* -------------------------
  Simple confetti engine
--------------------------*/
const canvas = document.querySelector('canvas.confetti');
const ctx = canvas.getContext('2d');
let W = canvas.width = innerWidth;
let H = canvas.height = innerHeight;
window.addEventListener('resize', ()=>{ W = canvas.width = innerWidth; H = canvas.height = innerHeight; });

let pieces = [];
function rand(min,max){ return Math.random()*(max-min)+min; }
function makePieces(count=80){
  pieces = [];
  const cols = ['#ff6b6b','#ffd166','#6bc5ff','#9b5cff','#7dffb2'];
  for(let i=0;i<count;i++){
    pieces.push({
      x: rand(0,W),
      y: rand(-H,0),
      w: rand(6,12),
      h: rand(8,18),
      vx: rand(-1.4,1.4),
      vy: rand(1,4),
      rot: rand(0,Math.PI*2),
      vr: rand(-0.08,0.08),
      color: cols[Math.floor(rand(0,cols.length))]
    });
  }
}
function updatePieces(){
  ctx.clearRect(0,0,W,H);
  for(const p of pieces){
    p.x += p.vx; p.y += p.vy; p.rot += p.vr; p.vy += 0.02;
    ctx.save();
    ctx.translate(p.x,p.y);
    ctx.rotate(p.rot);
    ctx.fillStyle = p.color;
    ctx.fillRect(-p.w/2,-p.h/2,p.w,p.h);
    ctx.restore();
  }
  // recycle
  pieces = pieces.filter(p => p.y < H + 50);
  if(pieces.length < 30){
    // keep some running
    if(Math.random() < 0.3) makePieces(15);
  }
  requestAnimationFrame(updatePieces);
}
makePieces(80);
let confettiOn = true;
updatePieces();

/* -------------------------
  WebAudio simple melody
--------------------------*/
let audioCtx;
function playMelody(){
  if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  const notes = [ 660,660,0,660,0,524,660,0,784 ]; // tiny jingle-ish (Hz)
  const now = audioCtx.currentTime;
  let t = now;
  for(let i=0;i<notes.length;i++){
    const f = notes[i];
    if(f>0){
      const o = audioCtx.createOscillator();
      const g = audioCtx.createGain();
      o.frequency.value = f;
      o.type = 'sine';
      g.gain.value = 0.0001;
      o.connect(g); g.connect(audioCtx.destination);
      o.start(t);
      g.gain.linearRampToValueAtTime(0.12, t+0.02);
      g.gain.exponentialRampToValueAtTime(0.001, t+0.35);
      o.stop(t+0.36);
    }
    t += 0.36;
  }
}

/* -------------------------
  Buttons and interactions
--------------------------*/
document.getElementById('playBtn').addEventListener('click', ()=>{
  playMelody();
  // small burst of confetti
  makePieces(140);
  confettiOn = true;
  document.getElementById('playBtn').textContent = 'üîä ƒê√£ b·∫≠t ‚Äî Enjoy!';
  setTimeout(()=>{ document.getElementById('playBtn').textContent = '‚ñ∂ B·∫≠t nh·∫°c & Kh·ªüi ƒë·ªông'; }, 2400);
});

document.getElementById('toggleConfetti').addEventListener('click', ()=>{
  confettiOn = !confettiOn;
  if(confettiOn) makePieces(160);
  canvas.style.opacity = confettiOn ? 1 : 0.05;
});

document.getElementById('surpriseBtn').addEventListener('click', ()=>{
  // quick flashing background
  const stage = document.querySelector('.stage');
  stage.animate([
    { boxShadow: '0 10px 60px rgba(255,107,107,0.35)' },
    { boxShadow: '0 10px 60px rgba(110,210,255,0.2)' },
    { boxShadow: '0 10px 60px rgba(255,107,107,0.35)' }
  ], { duration:900, iterations:1 });
  makePieces(220);
  playMelody();
});

/* -------------------------
  RSVP (localStorage)
--------------------------*/
const form = document.getElementById('rsvpForm');
const STORAGE_KEY = 'birthday_rsvps_v1';
form.addEventListener('submit', e=>{
  e.preventDefault();
  const name = document.getElementById('guestName').value.trim() || 'Kh√°ch ·∫©n danh';
  const email = document.getElementById('guestEmail').value.trim();
  const attend = document.getElementById('attend').value;
  const msg = document.getElementById('msg').value.trim();
  const store = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
  store.push({name,email,attend,msg,ts: Date.now()});
  localStorage.setItem(STORAGE_KEY, JSON.stringify(store));
  document.getElementById('saveNotice').textContent = `C·∫£m ∆°n ${name}! RSVP ƒë√£ ƒë∆∞·ª£c l∆∞u (t·∫°i tr√¨nh duy·ªát). T·ªïng RSVP: ${store.length}`;
  form.reset();
});

/* -------------------------
  Fill name/date/place from URL params
  e.g. invite.html?name=Lan&date=2025-12-01&place=Nh√†%20Lan
--------------------------*/
function fromParams(){
  const p = new URLSearchParams(location.search);
  const n = p.get('name'); const d = p.get('date'); const pl = p.get('place');
  if(n) document.getElementById('nameHolder').textContent = decodeURIComponent(n);
  if(d) document.getElementById('dateHolder').textContent = decodeURIComponent(d);
  if(pl) document.getElementById('placeHolder').textContent = decodeURIComponent(pl);
}
fromParams();

/* -------------------------
  Small accessibility tweak:
  If prefers-reduced-motion, pause confetti movement
--------------------------*/
const mediaReduce = window.matchMedia('(prefers-reduced-motion: reduce)');
if(mediaReduce.matches){
  // stop animations
  pieces = [];
  canvas.style.display = 'none';
}

/* -------------------------
  Optional: Auto-start confetti gently
--------------------------*/
setTimeout(()=>{ makePieces(30); }, 700);

/* -------------------------
  Make canvas full-size behind card
--------------------------*/
(function positionCanvas(){
  const rect = document.querySelector('.stage').getBoundingClientRect();
  canvas.style.left = '0';
  canvas.style.top = '0';
  canvas.style.zIndex = 0;
})();

/* -------------------------
  Prevent auto-sleep for mobile: tiny trick
--------------------------*/
if('wakeLock' in navigator) {
  // not essential; ignore errors
  try{ navigator.wakeLock.request('screen'); } catch(e){}
}

</script>
</body>
</html>
